AS5600.py



**What is an  AS5600?**

From the data sheet

*12-Bit Programmable Contactless Potentiometer**

The AS5600 is an easy to program magnetic rotary position sensor with a high-resolution 12-bit analog or PWM output. This contactless system measures the absolute angle of a diametric magnetized on-axis magnet. "

This is a Micropython library for reading an AS5600 using I2C.  It was developed on a Seeedstudio board and Raspberry Pi Pico.  It should work with other MCU's running Micropython but I2C setup may differ on on other boards.  It may work on circuit python but I have not tested this.

The field names are taken from the data sheet. All registers in the data sheet are implemented, as simple attributes of the AS5600 class.   You will need to read the datasheet to use the library.

** HOW IT WORKS (Programming)
NB: YOU WILL STILL HAVE TO READ THE DATASHEET

1. Each register or bitfield named in the datasheet (capitalised) is made into an attribute of the AS5600_low class (see Data descriptor below)
2. A higher level class AS5600 inherits from AS5600_low.  This allows friendlier names etc, without polluting the basics.  (Note: I dont think you can make friendler attribute names at this level unless you make a new descriptor).
3. You have to call super() in __init__ in the higher level class
4. Micropython does not seem to have __attribute__ etc so I use Data descriptors which a probably better and simpler anyway.  The actual I2C calls are done in the data descriptor class.
5. Configuration attributes are writeable and/or burnable but do not change in normal useage.  Therefore they are cached, on first read.  The cache is updated if the register is written to.  The CONFIG register in particular has lots of little bit fields so you do not want to have to read over I2C for every little bitfield.

HOW IT WORKS (HARDWARE).

Still testing.


*** Example file.

This is an early work in progress.  I ran a small  endless loop program then waved a magnet around.  I seemed to get sensible values from RAWANGLE but obviously a mechanical better setup is required.

The MD field never seemed to say a magnet was not detected although reasonable values were being generated by RAW ANGLE.  I am not sure why this is so, at this stage.  So some debugging will be required.  AGC levels seem very low.













